\chapter{Data Cleaning}
\label{ch:data_collection}
\section{Overview}
Now that we have discussed the various aparatuses provided by the PHENIX
experiment, we can go into more depth with the process of engineering features.
For this analysis, we consider only events which are identified by the Muon Arms
subsystem as being muons. The raw data provided by PHENIX is quite complex, and
at the hardware level is generally not too useful for physics analysis.

In this chapter, we will discuss the process of cleaning our data set, the goal
of which is to get rid of background data, while keeping any event that could
possibly contribute to the $W\rightarrow\mu$ signal. This cleaning is done in
three stages. The first stage concerns applying a simple basic cut to our data
set to remove events which are kinematically forbidden from having $W$ boson
parent particles, this is called the "Basic Cut".

After this, we label data with $W_{ness}$, which is an event's likelihood for
coming from a $W$ boson decay. Although this is part of data cleaning, since
$W_{ness}$ is an important parameter in the analysis, it is discussed in
Section~\ref{ch:likelihood}.

Finally, we must estimate the overall yield of $\mu$ resulting from the various
proton helicity combinations, and the signal to background ratio characterizing
that yield. Again, since this is also an important part of the physics, it is
discussed in Section ~\ref{sbr}.

\section{Analysis Variables and the Basic Cut}

A brief summary of the kinematic variables used later in the analysis is given
in Table~\ref{tab:basic_cuts}. In addition four sets of RPC cluster variables exist
which are being used as main RPC variables during run12 and after. Those contain
projections from either vertex, Station 1, 3 or the MuID road to the
corresponding z positions of the RPCs based on the tracks in the PHMuoTracksOut
node and are directly taken over from the RpcMuoTracks node in the dsts:

\begin{itemize}
\item newsngmuons$\rightarrow$Branch("RpcMatchVtx",0,"Rpc3dca[\_RecoTracks]/F:\\Rpc3time[\_RecoTracks]/F:Rpc3x[\_RecoTracks]/F:Rpc3y[\_RecoTracks]/F:\\Rpc1dca[\_RecoTracks]/F:Rpc1time[\_RecoTracks]/F:Rpc1x[\_RecoTracks/F:\\Rpc1y[\_RecoTracks]/F");
\item newsngmuons$\rightarrow$Branch("RpcMatchSt1",0,"Rpc3dca[\_RecoTracks]/F:\\Rpc3time[\_RecoTracks]/F:Rpc3x[\_RecoTracks]/F:Rpc3y[\_RecoTracks]/F:\\Rpc1dca[\_RecoTracks]/F:Rpc1time[\_RecoTracks]/F:Rpc1x[\_RecoTracks]/F:\\Rpc1y[\_RecoTracks]/F");
\item newsngmuons$\rightarrow$Branch("RpcMatchSt3",0,"Rpc3dca[\_RecoTracks]/F:\\Rpc3time[\_RecoTracks]/F:Rpc3x[\_RecoTracks]/F:Rpc3y[\_RecoTracks]/F:\\Rpc1dca[\_RecoTracks]/F:Rpc1time[\_RecoTracks]/F:Rpc1x[\_RecoTracks]/F:\\Rpc1y[\_RecoTracks]/F");
\item newsngmuons$\rightarrow$Branch("RpcMatchMuID",0,"Rpc3dca[\_RecoTracks]/F:\\Rpc3time[\_RecoTracks]/F:Rpc3x[\_RecoTracks]/F:Rpc3y[\_RecoTracks]/F:\\Rpc1dca[\_RecoTracks]/F:Rpc1time[\_RecoTracks]/F:Rpc1x[\_RecoTracks]/F:\\Rpc1y[\_RecoTracks]/F");
\end{itemize}

\input{../Chapter4/tab/kinematic_variables.tex}

For the moment the timing and DCA distributions we use are those matching from
station 1 for RPC1 and from station3 for RPC3.  In addition, in order to improve
the background rejection in the FVTX acceptance, for this analysis several new
variables are added in relation to the FVTX-MuTr matching which were directly
taken over from the corresponding methods  in the PHMuoTracksOut node. Those are
fvtx\_dr, fvtx\_d$\phi$ and fvtx\_d$\theta$ which compare the FVTX tracklets
radial position, azimuthal and polar angles with those of the MuTr as an
extrapolated z position between the two.  Another FVTX related addition is the
FVTX hit multiplicity within a cone of \textcolor{red}{INPUT RANGE HERE}  around
the projected track. This varible will henceforth be called FVTX\_cone.  

The "Basic Cut" is defined:
\begin{itemize}
\item Last MuID gap has to be gap 4 to ensure muons penetrating through all MuID steel
\item maximum momentum $p$$<$250\,GeV/$c$ which is the maximum possible physical energy
\item $\chi^2$$<$20 to require only reasonable tracks
\item $DG0$$<$20\,cm.
\item $DDG0$$<$9\,degrees.
\item single muon candiate in event.
\end{itemize}


In this W analysis one is interested in removing most lower momentum particles
which originate predominantly from background processes while keeping most of
the W decay muons. With the above cuts, we aim to reduce part of the fake muons
background assuring a good muon track reconstruction ($DG0$,$DDG0$ and $\chi^2$
cuts) and selecting tracks with momentum smaller than the maximum possible
physical energy. After applying these basic cuts, the background will be further
reduced via a likelihood method, described in chapter~\ref{ch:likelihood}, where
background and signal features will be studied in detailed.

The correlations between the several cut variables are shown in
Fig.~\ref{fig:kinematic_var_correlations} for data and for the W-si The only
exception is the correlation between the vertex extrapolated variables DCA\_z
and DCA\_r and the FVTX related matching variables. This is not entirely
unexpected as both should be sensitive to the amount of multiple scattering in
the central magnet yoke and initial shielding.

\section{Feature Engineering}
\subsection{Discriminating Kinematic Variables}
\subsection{Simulations}
